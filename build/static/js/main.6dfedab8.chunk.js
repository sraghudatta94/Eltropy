(this["webpackJsonpitunes-ui"]=this["webpackJsonpitunes-ui"]||[]).push([[0],{83:function(t,e,n){},85:function(t,e,n){"use strict";n.r(e);var s={};n.r(s),n.d(s,"loadAllSongs",(function(){return _})),n.d(s,"markFavourite",(function(){return E})),n.d(s,"unmarkFavourite",(function(){return I})),n.d(s,"fetchCategories",(function(){return T})),n.d(s,"searchSongs",(function(){return L})),n.d(s,"clearSearch",(function(){return W}));var r=n(1),a=n(0),o=n.n(a),c=n(24),i=n.n(c),l=n(19),u=n(44),p=n(20),h=n(23),d=n(14),b=n.n(d),j="SONGS_LIST",f="FAVOURITE",g="UNFAVOURITE",m="ADD_CATEGORIES",O="SEARCH_SONGS",x=Object(p.c)({allSongs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(h.a)(e.payload.feed.entry);default:return t}},favourites:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return console.log(t),console.log(e.type+" in reducer payload ->"+JSON.stringify(e.payload)),[].concat(Object(h.a)(t),[e.payload]);case g:return console.log(e.type+" in reducer payload ->"+JSON.stringify(e.payload)),console.log(b.a.remove(t,(function(t){return t==e.payload}))),b.a.remove.apply(b.a,Object(h.a)(t).concat([function(t){return console.log("loop"+t+"---"+e.payload),t==e.payload}])),Object(h.a)(t);default:return t}},categories:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:return b.a.keyBy(e.payload,"id");default:return t}},searchResults:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:return Object(h.a)(e.payload);default:return t}}}),v=n(10),y=n(11),S=n(13),w=n(12),N=n(4),k=n(45),C=n.n(k)()(),D=n(3),R=n.n(D),A=n(9),B=n(46),F=n.n(B),_=function(t){return function(){var t=Object(A.a)(R.a.mark((function t(e){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.get("https://itunes.apple.com/us/rss/topalbums/limit=100/json");case 2:(n=t.sent).data.error?(console.log("dispatching error - "+n.data.error),e({type:"API_ERROR",payload:n.data})):e({type:j,payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(t){return function(){var e=Object(A.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:f,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(t){return function(){var e=Object(A.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:g,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(t){return function(){var e=Object(A.a)(R.a.mark((function e(n){var s,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=[],r=0;r<t.length;r++)s.push({id:t[r].category.attributes["im:id"],name:t[r].category.attributes.term});n({type:m,payload:s});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(t,e){return function(){var n=Object(A.a)(R.a.mark((function n(s){var r,a,o,c;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(console.log("searchSong "+t),r=[],a=new RegExp("^.*(".concat(t,").*$"),"gim"),o=0;o<e.length-90;o++)c=e[o],null!=a.exec(c["im:name"].label)&&(console.log("match"),r.push(c));console.log("Results of search"),console.log(r),s({type:O,payload:r});case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},W=function(){return function(){var t=Object(A.a)(R.a.mark((function t(e){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:O,payload:[]});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=n(21),J=n(48),z=n.n(J),M=n(47),U=n.n(M),V=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var t=this;return Object(r.jsxs)("div",{className:"card song-card",style:{width:"300px"},children:[Object(r.jsx)("img",{className:"card-img-top",src:this.props.song["im:image"][2].label,alt:"Song",style:{width:"100%",maxWidth:"300px"}}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h4",{className:"card-title song-title",children:this.props.song["im:name"].label}),Object(r.jsxs)("p",{className:"card-text",children:[this.props.song["im:name"].label," by"," ",Object(r.jsxs)("a",{href:this.props.song["im:artist"].attributes?this.props.song["im:artist"].attributes.href:"#",target:"_blank",rel:"noreferrer",children:[" ",this.props.song["im:artist"].label]})]})]}),Object(r.jsxs)("div",{className:"card-footer",style:{display:"flex",justifyContent:"space-between",padding:"15px"},children:[Object(r.jsx)(G.a,{to:"/song/".concat(this.props.song.id.attributes["im:id"]),className:"btn btn-primary details-button",children:"View Details"}),-1==b.a.indexOf(this.props.favourites,this.props.song.id.attributes["im:id"])?Object(r.jsx)(U.a,{className:"material-icons",onClick:function(e){return t.props.markFavourite(t.props.song.id.attributes["im:id"])}}):Object(r.jsx)(z.a,{className:"material-icons",onClick:function(e){return t.props.unmarkFavourite(t.props.song.id.attributes["im:id"])}})]})]})}}]),n}(o.a.Component),H=Object(l.b)((function(t){return{favourites:t.favourites}}),s)(V),P=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){var t;Object(v.a)(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).renderSongList=function(t){var e=[];if(t.length<=0)return Object(r.jsx)("div",{children:Object(r.jsx)("h4",{children:"Sorry, No Songs Found at this time. Please try again ! ."})});for(var n=0;n<t.length;n++)e.push(Object(r.jsx)(H,{song:t[n]}));return e},t}return Object(y.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{class:"containerS songs-list-container",children:this.renderSongList(this.props.songs)})}}]),n}(o.a.Component),X=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){var t;Object(v.a)(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={searchInput:"",showSearchResult:!1,showSorted:!1,searchResults:[],sortedResults:[],sortButton:0,showFilterDropDown:!1},t.sortSongs=function(e,n){console.log("Sorting !");var s=b.a.orderBy(t.props.songs,["".concat(e)],n?["asc"]:["desc"]);console.log(JSON.stringify(s)),t.setState({sortedResults:s,showSorted:!0})},t.filterByCategory=function(e){var n=b.a.filter(t.props.songs,(function(t){return t.category.attributes["im:id"]===e}));t.setState({sortedResults:n,showSorted:!0}),console.log(n)},t.listAllCategories=function(){var e=[],n=function(n){e.push(Object(r.jsx)("a",{href:"#".concat(t.props.categories[n].name),onClick:function(e){t.filterByCategory(n),t.setState({showFilterDropDown:!1})},children:t.props.categories[n].name}))};for(var s in t.props.categories)n(s);return e},t}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var t=Object(A.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.props.songs.length){t.next=4;break}return console.log("HOme iffff"),t.next=4,this.props.loadAllSongs();case 4:this.props.fetchCategories(this.props.songs);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(r.jsx)("div",{style:{position:"absolute",top:"80px"},children:Object(r.jsxs)("div",{className:"songs-list-container",children:[Object(r.jsxs)("ul",{className:"sort-list",children:[Object(r.jsx)("li",{className:"",children:Object(r.jsx)("button",{className:"btn btn-secondary",children:"Sort By"})}),Object(r.jsx)("li",{className:"",children:Object(r.jsx)("button",{className:"btn btn-outline-light text-dark ".concat(1===this.state.sortButton?"active":""),onClick:function(e){t.setState({sortButton:1}),t.props.clearSearch(),t.sortSongs("title.label",!0)},children:"A - Z"})}),Object(r.jsx)("li",{className:"",children:Object(r.jsx)("button",{className:"btn btn-outline-light text-dark ".concat(2===this.state.sortButton?"active":""),onClick:function(e){t.setState({sortButton:2}),t.props.clearSearch(),t.sortSongs("title.label",!1)},children:"Z - A"})}),Object(r.jsx)("li",{className:"",children:Object(r.jsx)("button",{className:"btn btn-outline-light text-dark ".concat(3===this.state.sortButton?"active":""),onClick:function(e){t.setState({sortButton:3}),t.props.clearSearch(),t.sortSongs("im:releaseDate.label",!1)},children:"Newest First"})}),Object(r.jsx)("li",{className:"",children:Object(r.jsx)("button",{className:"btn btn-outline-light text-dark ".concat(4===this.state.sortButton?"active":""),onClick:function(e){t.setState({sortButton:4}),t.props.clearSearch(),t.sortSongs("im:releaseDate.label",!0)},children:"Oldest First"})}),Object(r.jsx)("li",{className:"",children:Object(r.jsx)("button",{className:"btn btn-outline-light text-dark ".concat(0===this.state.sortButton?"active":""),onClick:function(e){t.setState({sortButton:0}),t.props.clearSearch(),t.setState({showSorted:!1})},children:"Clear Filters"})})]}),Object(r.jsx)("div",{className:"list-icons",children:Object(r.jsxs)("div",{className:"dropdown",children:[Object(r.jsx)("button",{onClick:function(e){t.state.showFilterDropDown?t.setState({showFilterDropDown:!1}):t.setState({showFilterDropDown:!0})},className:"dropbtn icon-button",children:Object(r.jsx)("span",{className:"material-icons",children:"filter_alt"})}),Object(r.jsx)("div",{id:"myDropdown",className:"dropdown-content ".concat(this.state.showFilterDropDown?"show":""),children:this.listAllCategories()})]})}),this.props.searchResults.length>0?Object(r.jsx)(P,{songs:this.props.searchResults}):this.state.showSorted?Object(r.jsx)(P,{songs:this.state.sortedResults}):Object(r.jsx)(P,{songs:this.props.songs})]})})}}]),n}(o.a.Component),Z=Object(l.b)((function(t){return{songs:t.allSongs,categories:t.categories,searchResults:t.searchResults}}),s)(X),q=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(v.a)(this,n),(s=e.call(this,t)).state={searchInput:""},s}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var t=Object(A.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.loadAllSongs();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(r.jsxs)("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark",style:{position:"fixed",zIndex:"5",width:"100%",display:"flex",alignItems:"stretch"},children:[Object(r.jsx)("div",{style:{maxWidth:"300px",flexGrow:"2"},children:Object(r.jsx)(G.a,{className:"navbar-brand",to:"/",children:"I-Tunes Store"})}),Object(r.jsxs)("div",{className:"navbar-nav search-container",style:{flexGrow:"7"},children:[Object(r.jsx)("input",{type:"text",className:"input-group search-bar",name:"searchBar",placeholder:"Enter the song name",onChange:function(e){t.setState({searchInput:e.target.value})}}),Object(r.jsx)("input",{type:"submit",name:"search",value:"Search",className:"input-group search-button",onClick:function(e){t.props.searchSongs(t.state.searchInput,t.props.allSongs)}})]})]})}}]),n}(o.a.Component),$=Object(l.b)((function(t){return t}),s)(q),K=(n(83),function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var t=Object(A.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.props.allSongs.length){t.next=3;break}return t.next=3,this.props.loadAllSongs();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.song?Object(r.jsxs)("div",{className:"container",style:{position:"absolute",top:"120px",marginLeft:"50px"},children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("img",{src:this.props.song["im:image"][2].label,className:"col-md-4 col-sm-6 col-lg-4",style:{maxHeight:"300px",maxWidth:"300px"}}),Object(r.jsxs)("div",{className:"col-md-6 col-sm-6 col-lg-6",children:[Object(r.jsx)("h2",{style:{marginTop:"10px"},children:this.props.song["im:name"].label}),Object(r.jsxs)("div",{children:["".concat(this.props.song["im:contentType"].attributes.label," ").concat(this.props.song["im:contentType"]["im:contentType"].attributes.label," by "),Object(r.jsx)("span",{children:Object(r.jsx)("a",{href:this.props.song["im:artist"].attributes?this.props.song["im:artist"].attributes.href:"#",target:"_blank",rel:"noreferrer",children:this.props.song["im:artist"].label})})]}),Object(r.jsxs)("div",{children:["Available for"," ",Object(r.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",this.props.song["im:price"].label]})]}),Object(r.jsxs)("div",{children:["Release Date : \xa0",this.props.song["im:releaseDate"].attributes.label," "]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{disabled:!0,className:"btn btn-info",style:{marginTop:"10px",fontSize:"18px",fontWeight:"bold"},children:this.props.song.category.attributes.term})})]})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-sm-12 col-md-10 col-lg-10",children:this.props.song.rights.label})}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-lg-4 col-md-4"}),Object(r.jsx)("div",{className:"col-md-14 col-sm-10 col-lg-4 col-xs-10",children:Object(r.jsxs)(G.a,{to:"/",style:{alignContent:"center",textAlign:"center",fontSize:"24px"},children:[Object(r.jsx)("i",{className:"material-icons",style:{fontSize:"36px",fontWeight:"bolder",position:"relative",top:"9px"},children:"arrow_back"}),"Take me back"]})}),Object(r.jsx)("div",{className:"col-lg-4 col-md-4"})]})]}):Object(r.jsx)("div",{children:"Loading..."})}}]),n}(o.a.Component)),Q=Object(l.b)((function(t,e){return{allSongs:t.allSongs,song:b.a.find(t.allSongs,(function(t){return t.id.attributes["im:id"]==e.match.params.id}))}}),s)(K),Y=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(r.jsx)(N.b,{history:C,children:Object(r.jsxs)("div",{children:[Object(r.jsx)($,{}),Object(r.jsxs)(N.c,{children:[Object(r.jsx)(N.a,{exact:!0,path:"/",component:Z}),Object(r.jsx)(N.a,{exact:!0,path:"/song/:id",component:Q})]})]})})}}]),n}(o.a.Component),tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,et=Object(p.e)(x,{},tt(Object(p.a)(u.a)));i.a.render(Object(r.jsx)(l.a,{store:et,children:Object(r.jsx)(Y,{})}),document.querySelector("#root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.6dfedab8.chunk.js.map